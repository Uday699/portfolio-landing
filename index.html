<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>LPU — Demo Landing</title>
  <meta name="description" content="Lovely Professional University — Demo landing page with fees modal, brochure download and enquiry form.">
  <style>
    :root{
      --brand:#e87700;  /* LPU orange */
      --brand-dark:#c65300;
      --accent:#0b66ff;
      --muted:#6b7280;
      --card:#ffffff;
      --bg:#f6f8fb;
      --radius:12px;
      --max-w:1280px;
      font-family: Inter, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
    }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{margin:0;background:var(--bg);color:#081225;-webkit-font-smoothing:antialiased}

    .promo { background:#0b0b0b;color:#fff;text-align:center;padding:8px 10px;font-weight:700;font-size:14px; }

    .site { max-width:var(--max-w); margin:18px auto; padding:0 20px 48px; }

    header.header { display:flex;align-items:center;justify-content:space-between;margin:18px 0 }
    .brand { font-weight:700;color:var(--brand);display:flex;align-items:center;gap:10px }
    .brand img{height:46px}
    nav.topnav{display:flex;align-items:center;gap:12px}
    nav.topnav a{color:var(--muted);text-decoration:none;padding:8px 12px;border-radius:8px}
    nav.topnav a.active, nav.topnav a:hover{background:rgba(0,0,0,0.04);color:#111}

    .header-actions {display:flex;align-items:center;gap:10px}
    .search {border:1px solid #eef5ff;background:#fff;border-radius:28px;padding:8px 12px;display:flex;align-items:center;gap:8px;min-width:220px}
    .search input{border:0;outline:none;font-size:14px}

    .btn {background:var(--brand);color:#fff;padding:10px 16px;border-radius:28px;border:0;cursor:pointer;font-weight:700}
    .btn:hover{filter:brightness(.98)}
    .btn-outline {background:#fff;border:2px solid rgba(0,0,0,0.06);padding:8px 14px;border-radius:28px;font-weight:700}

    .hero { display:flex; gap:28px; align-items:stretch; background: linear-gradient(180deg,#fff,#fbfdff); padding:28px; border-radius:18px; box-shadow:0 12px 40px rgba(12,20,40,0.04); position:relative; overflow:visible }
    .hero-left { flex:1; min-width:300px; }
    .eyebrow { background:#fff;border-radius:8px;padding:6px 10px;display:inline-block;color:var(--muted);font-weight:600;margin-bottom:8px }
    .hero h1{ margin:6px 0 12px;font-size:42px;line-height:1.02;color:#0a233f }
    .hero p.lead{ color:var(--muted); margin:0 0 18px; font-size:15px }

    .hero-cta{display:flex;gap:12px;align-items:center;margin-bottom:14px;flex-wrap:wrap}
    .stats{display:flex;gap:18px;margin-top:10px}
    .stat .num{font-weight:800;color:var(--brand);font-size:20px}
    .stat .label{color:var(--muted);font-size:13px}

    .hero-right { width:460px; max-width:46%; min-width:240px; display:flex;align-items:flex-end;justify-content:flex-end }
    .hero-right .person { width:420px;height:520px;border-radius:18px;overflow:hidden;box-shadow:0 30px 60px rgba(8,18,36,0.12); background:linear-gradient(180deg,#fff,#f7fbff) }
    .hero-right img{width:100%;height:100%;object-fit:cover;display:block}

    .programs{display:flex;gap:16px;margin-top:22px;flex-wrap:wrap}
    .prog{width:220px;border-radius:14px;overflow:hidden;border:1px solid rgba(0,0,0,0.04);background:#fff;box-shadow:0 10px 30px rgba(0,0,0,0.03);display:flex;flex-direction:column}
    .prog .thumb{height:120px;background:#fff;display:flex;align-items:center;justify-content:center}
    .prog img{width:100%;height:100%;object-fit:cover}
    .prog .meta{padding:12px;background:linear-gradient(180deg,#fff,#f9fbff);flex:1}
    .prog .meta h4{margin:0;color:var(--brand-dark)}
    .prog .meta p{margin:6px 0 0;color:var(--muted);font-size:13px}
    .prog .band{background:var(--brand-dark);color:#fff;padding:10px;text-align:center;font-weight:700;border-radius:0 0 10px 10px}

    .grid-2{display:grid;grid-template-columns:1fr 420px;gap:18px;margin-top:18px}
    .card{background:var(--card);border-radius:12px;padding:18px;box-shadow:0 8px 30px rgba(12,20,40,0.03)}
    .accordion .acc{border-radius:8px;padding:12px;background:#fff;border:1px solid rgba(0,0,0,0.03);margin-bottom:8px}
    .acc-header{font-weight:700;cursor:pointer}
    .acc-body{display:none;color:var(--muted);margin-top:8px}

    .form-card .row{display:flex;gap:10px;margin-bottom:10px}
    .input, select{padding:10px;border-radius:8px;border:1px solid #eef4ff;background:#fff;flex:1}
    .consent{font-size:13px;color:var(--muted)}
    .form-msg{color:var(--muted);margin-top:6px}

    /* floating contact */
    .float-contact{position:fixed;right:12px;top:50%;transform:translateY(-50%);display:flex;flex-direction:column;gap:12px;z-index:1200}
    .float-contact a{width:44px;height:44px;border-radius:50%;display:flex;align-items:center;justify-content:center;background:#fff;box-shadow:0 10px 30px rgba(2,6,23,0.12)}
    .float-contact a.call{background:var(--brand);color:#fff}
    .float-contact a.wa{background:#25d366;color:#fff}

    /* modal/backdrop - hidden attribute prevents interception */
    .modal-backdrop[hidden]{ display:none !important; visibility:hidden !important; pointer-events:none !important; opacity:0 !important; }
    .modal-backdrop{ position:fixed; inset:0; display:flex; align-items:center; justify-content:center; background:rgba(2,6,23,0.55); z-index:2000; padding:20px }
    .modal{ background:#fff; border-radius:12px; max-width:760px; width:100%; padding:20px; box-shadow:0 24px 48px rgba(2,6,23,0.28) }
    .fee-list{margin:10px 0 0;padding-left:16px}
    .btn-close{appearance:none;border:0;background:#fff2e6;color:var(--brand-dark);padding:8px 12px;border-radius:8px;cursor:pointer;border:1px solid rgba(0,0,0,0.04)}

    .lightbox-img{width:100%;height:auto;border-radius:8px}

    @media (max-width:980px){
      .hero{flex-direction:column}
      .hero-right{max-width:100%;width:100%}
      .hero-right .person{height:340px}
      .grid-2{grid-template-columns:1fr}
      .programs{justify-content:center}
      .search{min-width:120px}
    }
    @media (max-width:560px){
      .prog{width:46%}
      .brand img{height:38px}
      .hero h1{font-size:28px}
    }
  </style>
</head>
<body>
  <!-- top promo -->
  <div class="promo">Applications for LPUNEST 2026 Are Now Open — Apply Today!</div>

  <div class="site" role="main">
    <header class="header" role="banner">
      <div class="brand" aria-label="Lovely Professional University">
        <img src="./static/lpu-logo.jpg" alt="LPU logo">
        <div>Lovely Professional University — Demo</div>
      </div>

      <div style="display:flex;align-items:center;gap:12px">
        <nav class="topnav" role="navigation" aria-label="Main nav">
          <a href="index.html" class="active">Home</a>
          <a href="amity.html">Amity</a>
        </nav>

        <div class="header-actions" aria-hidden="false">
          <div class="search" role="search">
            <svg width="16" height="16" viewBox="0 0 24 24" style="opacity:.6"><path d="M21 21l-4.35-4.35" stroke="#333" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" fill="none"/><circle cx="11" cy="11" r="6" stroke="#333" stroke-width="2" fill="none"/></svg>
            <input placeholder="Search..." aria-label="Search">
          </div>

          <button class="btn-outline" title="Enquire">Enquire</button>
          <button class="btn" title="Apply Now">Apply Now</button>
        </div>
      </div>
    </header>

    <!-- HERO -->
    <section class="hero" aria-label="Hero">
      <div class="hero-left">
        <div class="eyebrow">NAAC A++</div>
        <h1>India's Best<br/>Private University</h1>
        <p class="lead">LPU offers world-class infrastructure, research faculty, vibrant campus and a wide selection of programmes — join thousands of students who choose LPU for career-ready learning.</p>

        <div class="hero-cta">
          <button class="btn" data-open-fees data-univ="lpu">Check Course-wise Fees</button>
          <button id="downloadBrochureLPU" class="btn-outline">Download Brochure</button>
          <button class="btn" onclick="document.getElementById('apply-form').scrollIntoView({behavior:'smooth'})">Apply Now</button>
        </div>

        <div class="stats">
          <div class="stat"><div class="num" data-target="150">0</div><div class="label">Programmes</div></div>
          <div class="stat"><div class="num" data-target="42000">0</div><div class="label">Students</div></div>
          <div class="stat"><div class="num" data-target="1100">0</div><div class="label">Placements</div></div>
        </div>

        <div id="programs" class="programs" aria-label="Programs">
          <div class="prog" role="group">
            <div class="thumb"><img alt="B.Tech" src="https://via.placeholder.com/400x240?text=B.Tech"></div>
            <div class="meta"><h4>B.Tech</h4><p>Engineering & Technology</p></div>
            <div class="band">B.Tech</div>
          </div>

          <div class="prog" role="group">
            <div class="thumb"><img alt="MBA" src="https://via.placeholder.com/400x240?text=MBA"></div>
            <div class="meta"><h4>MBA</h4><p>18 Specializations</p></div>
            <div class="band">MBA</div>
          </div>

          <div class="prog" role="group">
            <div class="thumb"><img alt="BCA" src="https://via.placeholder.com/400x240?text=BCA"></div>
            <div class="meta"><h4>BCA</h4><p>Applied Computing</p></div>
            <div class="band">BCA</div>
          </div>

          <div class="prog" role="group">
            <div class="thumb"><img alt="BBA" src="https://via.placeholder.com/400x240?text=BBA"></div>
            <div class="meta"><h4>BBA</h4><p>Business & Management</p></div>
            <div class="band">BBA</div>
          </div>
        </div>
      </div>

      <div class="hero-right" aria-hidden="true">
        <figure class="person" role="img" aria-label="Student portrait">
          <img alt="Student portrait" src="https://images.unsplash.com/photo-1524504388940-b1c1722653e1?q=80&w=1200&auto=format&fit=crop&crop=top">
        </figure>
      </div>
    </section>

    <!-- main grid: courses/faq + form -->
    <div class="grid-2">
      <div>
        <section class="card" aria-labelledby="popular-title">
          <h3 id="popular-title">Popular Courses</h3>
          <div style="margin-top:12px">
            <div style="display:flex;gap:10px;margin-bottom:12px">
              <button class="btn-outline" style="border-radius:10px;padding:8px 12px">B.Tech</button>
              <button class="btn-outline" style="border-radius:10px;padding:8px 12px">MCA</button>
              <button class="btn-outline" style="border-radius:10px;padding:8px 12px">BBA</button>
            </div>

            <div style="margin-bottom:14px">
              <h4>B.Tech — Computer Science</h4>
              <p style="color:var(--muted)">Focus on practical labs, industry capstone projects, cloud & AI toolchains.</p>
              <p><strong>Fee range:</strong> ₹120,000 - ₹300,000</p>
              <button class="btn" data-open-fees data-univ="lpu">View Fees</button>
            </div>

            <h4 style="margin-top:18px">FAQ</h4>
            <div class="accordion" style="margin-top:8px">
              <div class="acc">
                <div class="acc-header">What are the intake months?</div>
                <div class="acc-body">Usually July and January. Check program pages for exact dates.</div>
              </div>
              <div class="acc">
                <div class="acc-header">Is hostel available?</div>
                <div class="acc-body">Yes — on-campus hostels are available with food and transport options.</div>
              </div>
            </div>
          </div>
        </section>

        <section class="card" style="margin-top:18px">
          <h3>Campus Gallery</h3>
          <div class="gallery" style="margin-top:12px; display:grid; grid-template-columns:repeat(3,1fr); gap:12px;">
            <button class="gallery-item" data-src="https://via.placeholder.com/1200x700?text=LPU+Campus+1"><img alt="campus 1" src="https://via.placeholder.com/400x250?text=Campus+1"></button>
            <button class="gallery-item" data-src="https://via.placeholder.com/1200x700?text=LPU+Campus+2"><img alt="campus 2" src="https://via.placeholder.com/400x250?text=Campus+2"></button>
            <button class="gallery-item" data-src="https://via.placeholder.com/1200x700?text=LPU+Lab+1"><img alt="lab 1" src="https://via.placeholder.com/400x250?text=Lab+1"></button>
          </div>
        </section>
      </div>

      <aside class="card form-card" aria-labelledby="apply-title">
        <h3 id="apply-title">Register / Request Info</h3>
        <form id="apply-form" class="lead-form" data-univ="lpu" novalidate>
          <div class="row">
            <input name="name" class="input" placeholder="Full Name *" required>
            <input name="email" class="input" type="email" placeholder="Email *" required>
          </div>
          <div class="row">
            <input name="phone" class="input" placeholder="Phone (10-digit) *" required>
            <select name="state" class="input">
              <option value="">Select State</option><option>Punjab</option><option>Haryana</option><option>Delhi</option>
            </select>
          </div>
          <div class="row">
            <select name="course" class="input" required>
              <option value="">Course Interested *</option><option>B.Tech</option><option>MCA</option><option>BBA</option>
            </select>
            <select name="intake" class="input"><option>2025</option><option>2026</option></select>
          </div>

          <label class="consent"><input type="checkbox" name="consent" /> I authorise LPU to contact me regarding admissions.</label>

          <div style="display:flex;gap:12px;align-items:center;margin-top:10px">
            <button type="submit" class="btn">Apply Now</button>
            <div class="form-msg" aria-live="polite"></div>
          </div>
        </form>
      </aside>
    </div>

    <footer class="site-footer" style="margin-top:22px;color:var(--muted)">© LPU (Demo) — Template • Built with HTML/CSS/JS</footer>
  </div>

  <!-- floating contact -->
  <div class="float-contact" aria-hidden="true">
    <a class="call" href="tel:+911234567890" title="Call"><svg width="16" height="16" viewBox="0 0 24 24"><path fill="#fff" d="M6.6 10.8c1.5 3 3.7 5.3 6.7 6.8l1-1c.6-.6 1.5-.7 2.2-.2 1.4.9 2.8 1.4 4.4 1.4.6 0 1 .5 1 1V21c0 .6-.4 1-1 1C6.3 22 0 15.7 0 7c0-.6.4-1 1-1h2.6c.6 0 1 .4 1 1 0 1.6.5 3 1.4 4.4.4.7.3 1.6-.2 2.2l-1 1z"/></svg></a>
    <a class="wa" href="https://wa.me/919999999999" target="_blank" title="WhatsApp"><svg width="16" height="16" viewBox="0 0 24 24"><path fill="#fff" d="M20.5 3.5C18.1 1.1 14.7 0 11 0 5 0 .2 4.9.2 10.9c0 1.8.4 3.6 1.2 5.2L0 24l7.1-1.9c1.4.6 2.8 1 4.4 1 6 0 10.9-4.9 10.9-10.9 0-3.7-1.1-7.1-3.1-9.4z"/></svg></a>
  </div>

  <!-- pre-rendered lightbox/backdrop (kept hidden by CSS) -->
  <div id="lightbox" class="modal-backdrop" hidden aria-hidden="true">
    <div class="modal" role="dialog" aria-modal="true">
      <img id="lightbox-img" class="lightbox-img" src="" alt="">
      <div style="text-align:right;margin-top:12px"><button id="closeLB" class="btn-close">Close</button></div>
    </div>
  </div>

  <!-- core JS (modal, counters, form) -->
  <script>
    // CONFIG: set your endpoints here
    const PIPEDREAM_URL = ''; // <-- set your Pipedream webhook URL if you want remote submissions
    const BROCHURE_URL_LPU = ''; // <-- set real brochure PDF URL if available

    document.addEventListener('DOMContentLoaded', function() {
      const $ = (s, ctx=document) => ctx.querySelector(s);
      const $$ = (s, ctx=document) => Array.from(ctx.querySelectorAll(s));

      // ensure pre-rendered lightbox/backdrop starts hidden and doesn't intercept clicks
      (function initLightbox(){
        const lb = document.getElementById('lightbox');
        if(lb){
          lb.hidden = true;
          lb.setAttribute('aria-hidden','true');
          lb.style.pointerEvents = 'none';
        }
      })();

      // counters
      $$('.num').forEach(el => el.textContent = '0');
      const counters = $$('.num');
      if(counters.length){
        const obs = new IntersectionObserver(entries => {
          entries.forEach(entry => {
            if(entry.isIntersecting){
              const el = entry.target;
              if(!el._started){
                el._started = true;
                const target = parseInt(el.dataset.target||0,10);
                let cur = 0;
                const step = Math.max(1, Math.ceil(target/80));
                const t = setInterval(()=> {
                  cur += step;
                  if(cur >= target){ el.textContent = target.toLocaleString(); clearInterval(t); }
                  else el.textContent = cur.toLocaleString();
                }, 18);
              }
            }
          });
        },{threshold:0.4});
        counters.forEach(c => obs.observe(c));
      }

      // accordion toggle
      $$('.acc-header').forEach(h => h.addEventListener('click', () => {
        const body = h.nextElementSibling;
        if(!body) return;
        const open = body.style.display === 'block';
        $$('.acc-body').forEach(b => b.style.display = 'none');
        body.style.display = open ? 'none' : 'block';
      }));

      // gallery lightbox (delegated)
      document.addEventListener('click', function(e){
        const g = e.target.closest && e.target.closest('.gallery-item');
        if(!g) return;
        const src = g.dataset.src;
        if(!src) return;
        const lb = document.getElementById('lightbox');
        const img = document.getElementById('lightbox-img');
        if(lb && img){
          img.src = src;
          lb.hidden = false;
          lb.removeAttribute('aria-hidden');
          lb.style.pointerEvents = 'auto';
        }
      });

      // close lightbox via backdrop or button or ESC
      document.addEventListener('click', function(e){
        const lb = document.getElementById('lightbox');
        if(!lb || lb.hidden) return;
        if(e.target === lb) closeLightbox();
      });
      $('#closeLB') && $('#closeLB').addEventListener('click', closeLightbox);
      document.addEventListener('keydown', function(e){ if(e.key === 'Escape') closeLightbox(); });

      function closeLightbox(){
        const lb = document.getElementById('lightbox'); if(!lb) return;
        lb.hidden = true; lb.setAttribute('aria-hidden','true'); lb.style.pointerEvents = 'none';
        const img = document.getElementById('lightbox-img'); if(img) img.src = '';
      }

      // FEE MODAL (dynamic, robust)
      const SAMPLE_FEES = {
        courses:[
          {name:'B.Tech (CSE)', fee_min:120000, fee_max:300000, duration:'4 yrs'},
          {name:'MCA', fee_min:90000, fee_max:220000, duration:'2 yrs'},
          {name:'MBA', fee_min:150000, fee_max:450000, duration:'2 yrs'}
        ]
      };

      async function openFeeModal(univ='lpu'){
        // remove previous
        document.querySelectorAll('.modal-backdrop[data-type="fee"]').forEach(el=>el.remove());

        const backdrop = document.createElement('div');
        backdrop.className = 'modal-backdrop';
        backdrop.setAttribute('data-type','fee');
        backdrop.hidden = false;
        backdrop.style.pointerEvents = 'auto';

        const modal = document.createElement('div');
        modal.className = 'modal';
        modal.setAttribute('role','dialog');
        modal.innerHTML = `<h3>Course-wise Fee Ranges (${(univ||'').toUpperCase()})</h3>
          <div id="fee-content" style="min-height:40px">Loading...</div>
          <div style="text-align:right;margin-top:12px"><button data-close-fee class="btn-close">Close</button></div>`;

        backdrop.appendChild(modal);
        document.body.appendChild(backdrop);
        document.body.classList.add('no-scroll');

        // close on backdrop click (when clicking outside modal)
        backdrop.addEventListener('click', (ev)=>{ if(ev.target === backdrop){ backdrop.remove(); document.body.classList.remove('no-scroll'); } });
        modal.addEventListener('click', ev => ev.stopPropagation());

        // attempt fetch; fallback to SAMPLE_FEES
        try {
          const res = await fetch(`/api/fees/${encodeURIComponent(univ)}`);
          if(!res.ok) throw new Error('no remote');
          const json = await res.json();
          renderFees(json);
        } catch(err) {
          renderFees(SAMPLE_FEES);
        }

        function renderFees(json){
          const content = modal.querySelector('#fee-content');
          if(json && Array.isArray(json.courses)){
            const ul = document.createElement('ul'); ul.className = 'fee-list';
            json.courses.forEach(c => {
              const li = document.createElement('li');
              li.innerHTML = `<strong>${c.name}</strong>: ₹${(Number(c.fee_min)||0).toLocaleString()} - ₹${(Number(c.fee_max)||0).toLocaleString()} ${c.duration ? ' ('+c.duration+')' : ''}`;
              ul.appendChild(li);
            });
            content.innerHTML = '';
            content.appendChild(ul);
          } else {
            content.textContent = 'No fee data available.';
          }
        }
      }

      // open fee on click (delegated)
      document.addEventListener('click', function(e){
        const op = e.target.closest && e.target.closest('[data-open-fees]');
        if(!op) return;
        const univ = op.dataset.univ || 'lpu';
        openFeeModal(univ);
      });

      // close fee modal on button or ESC
      document.addEventListener('click', function(e){
        if(e.target && e.target.matches('[data-close-fee]')){
          document.querySelectorAll('.modal-backdrop[data-type="fee"]').forEach(el=>el.remove());
          document.body.classList.remove('no-scroll');
        }
      });
      document.addEventListener('keydown', function(e){
        if(e.key === 'Escape'){
          document.querySelectorAll('.modal-backdrop[data-type="fee"]').forEach(el=>el.remove());
          document.body.classList.remove('no-scroll');
        }
      });

      // brochure download
      const dl = document.getElementById('downloadBrochureLPU');
      if(dl){
        dl.addEventListener('click', function(){
          if(BROCHURE_URL_LPU){ window.open(BROCHURE_URL_LPU,'_blank'); return; }
          // fallback: create demo file
          const content = 'LPU — Demo Brochure\\n\\nPrograms:\\n- B.Tech (CSE)\\n- MCA\\n- BBA\\n\\nContact: admissions@lpu.demo';
          const blob = new Blob([content], {type:'application/pdf'});
          const url = URL.createObjectURL(blob);
          const a = document.createElement('a'); a.href = url; a.download = 'LPU-Brochure.pdf'; document.body.appendChild(a); a.click(); a.remove(); setTimeout(()=>URL.revokeObjectURL(url),4000);
        });
      }

      // lead form submission: Pipedream or localStorage fallback
      $$('.lead-form').forEach(form => {
        try { const n = localStorage.getItem('lead_name'), e = localStorage.getItem('lead_email'); if(n) form.querySelector('[name="name"]').value = n; if(e) form.querySelector('[name="email"]').value = e; } catch(e){}

        form.addEventListener('submit', async function(ev){
          ev.preventDefault();
          const msgEl = form.querySelector('.form-msg');
          const data = {
            name: (form.querySelector('[name="name"]').value||'').trim(),
            email: (form.querySelector('[name="email"]').value||'').trim(),
            phone: (form.querySelector('[name="phone"]').value||'').trim(),
            state: (form.querySelector('[name="state"]').value||'').trim(),
            course: (form.querySelector('[name="course"]').value||'').trim(),
            intake: (form.querySelector('[name="intake"]').value||'').trim(),
            consent: !!form.querySelector('[name="consent"]').checked,
            university: form.dataset.univ || ''
          };

          if(!data.name || !data.email || !data.phone || !data.course || !data.consent){
            if(msgEl) msgEl.textContent = 'Please complete required fields and accept consent.';
            return;
          }
          if(!/^[6-9]\\d{9}$/.test(data.phone)){
            if(msgEl) msgEl.textContent = 'Enter a valid 10-digit Indian phone number.';
            return;
          }

          if(PIPEDREAM_URL){
            try {
              const res = await fetch(PIPEDREAM_URL, {method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify(data)});
              if(res.ok){ if(msgEl) msgEl.textContent = 'Thanks — your enquiry was submitted.'; form.reset(); try{ localStorage.setItem('lead_name', data.name); localStorage.setItem('lead_email', data.email);}catch(e){} }
              else { if(msgEl) msgEl.textContent = 'Submission failed. Try again later.'; }
            } catch(err){ if(msgEl) msgEl.textContent = 'Submission error. Try again.'; }
          } else {
            try {
              const leads = JSON.parse(localStorage.getItem('demo_leads')||'[]');
              leads.push({data, ts:new Date().toISOString()});
              localStorage.setItem('demo_leads', JSON.stringify(leads));
              if(msgEl) msgEl.textContent = 'Saved locally (demo).';
              form.reset();
            } catch(err){ if(msgEl) msgEl.textContent = 'Save failed.'; }
          }
        });
      });

      // safety: ensure hidden modal-backdrops do not capture pointer events
      document.querySelectorAll('.modal-backdrop[hidden]').forEach(el=>{
        el.style.pointerEvents = 'none';
      });
    }); // DOMContentLoaded end
  </script>
</body>
</html>
